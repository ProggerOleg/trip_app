{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useHttp } from \"../hooks/http.hook\";\nconst useWeatherService = () => {\n  _s();\n  const {\n    request\n  } = useHttp();\n  const __apiKey = 'EUHRQXCFA9JUS3FDZQDZJTYQW';\n  const __googleApiKey = 'AIzaSyB57FMnwo8xrc4Ptm0s6K0-7yt7YtHOvV4';\n  const googleAutocomplete = async input => {\n    const res = await request(`https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${input}&types=(cities)&key=${__googleApiKey}`);\n    return {\n      list: res.predictions.map(_transformPlaces)\n    };\n  };\n  const getForecast = async (latitude, longitude) => {\n    const res = await request(`https://api.openweathermap.org/data/2.5/forecast?lat=${latitude}&lon=${longitude}&appid=${__apiKey}`);\n    return {\n      city: res.city.name,\n      weather: res.list.map(_transformLocation)\n    };\n  };\n  const getLocationByCity = async city => {\n    const res = await request(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${__apiKey}`);\n    return {\n      \"lon\": res.coord.lon,\n      'lat': res.coord.lat\n    };\n  };\n  const _transformLocation = item => {\n    return {\n      weather: item.weather[0].main,\n      temperature: Math.floor(item.main.temp - 273.15),\n      precipitation: item.pop,\n      humidity: item.main.humidity,\n      wind: item.wind.speed,\n      icon: item.weather[0].icon\n    };\n  };\n  const _transformPlaces = item => {\n    return {\n      place_id: item.place_id,\n      place: item.structured_formatting.main_text\n    };\n  };\n  return {\n    googleAutocomplete,\n    getForecast,\n    getLocationByCity\n  };\n};\n_s(useWeatherService, \"Cd6rTTFIaDkCOxqWEjU2WwhZI/U=\", false, function () {\n  return [useHttp];\n});\nexport default useWeatherService;","map":{"version":3,"names":["useHttp","useWeatherService","_s","request","__apiKey","__googleApiKey","googleAutocomplete","input","res","list","predictions","map","_transformPlaces","getForecast","latitude","longitude","city","name","weather","_transformLocation","getLocationByCity","coord","lon","lat","item","main","temperature","Math","floor","temp","precipitation","pop","humidity","wind","speed","icon","place_id","place","structured_formatting","main_text"],"sources":["/home/oleg/test_zadaniye/Reenbit/weather-app/src/services/WeatherService.js"],"sourcesContent":["import { useHttp } from \"../hooks/http.hook\";\n\nconst useWeatherService = () => {\n    const {request} = useHttp();\n    const __apiKey = 'EUHRQXCFA9JUS3FDZQDZJTYQW'\n    const __googleApiKey = 'AIzaSyB57FMnwo8xrc4Ptm0s6K0-7yt7YtHOvV4'\n\n    const googleAutocomplete = async (input) => {\n        const res = await request(`https://maps.googleapis.com/maps/api/place/autocomplete/json?input=${input}&types=(cities)&key=${__googleApiKey}`)\n        return { list: res.predictions.map(_transformPlaces) }\n    }\n\n    const getForecast = async (latitude, longitude) => {\n        const res = await request(`https://api.openweathermap.org/data/2.5/forecast?lat=${latitude}&lon=${longitude}&appid=${__apiKey}`)\n        return { city: res.city.name, weather: res.list.map(_transformLocation)}\n    }\n\n    const getLocationByCity = async (city) => {\n        const res = await request(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${__apiKey}`)\n        return { \"lon\": res.coord.lon, 'lat': res.coord.lat}\n    }\n\n    const _transformLocation = (item) => {\n        return {\n            weather: item.weather[0].main,\n            temperature: Math.floor(item.main.temp - 273.15),\n            precipitation: item.pop,\n            humidity: item.main.humidity,\n            wind: item.wind.speed,\n            icon: item.weather[0].icon\n        }\n    }\n\n    const _transformPlaces = (item) => {\n        return {\n            place_id: item.place_id,\n            place: item.structured_formatting.main_text\n        }\n    }\n\n    return {\n        googleAutocomplete,\n        getForecast,\n        getLocationByCity\n    }\n}\n\nexport default useWeatherService;"],"mappings":";AAAA,SAASA,OAAO,QAAQ,oBAAoB;AAE5C,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC5B,MAAM;IAACC;EAAO,CAAC,GAAGH,OAAO,EAAE;EAC3B,MAAMI,QAAQ,GAAG,2BAA2B;EAC5C,MAAMC,cAAc,GAAG,yCAAyC;EAEhE,MAAMC,kBAAkB,GAAG,MAAOC,KAAK,IAAK;IACxC,MAAMC,GAAG,GAAG,MAAML,OAAO,CAAE,sEAAqEI,KAAM,uBAAsBF,cAAe,EAAC,CAAC;IAC7I,OAAO;MAAEI,IAAI,EAAED,GAAG,CAACE,WAAW,CAACC,GAAG,CAACC,gBAAgB;IAAE,CAAC;EAC1D,CAAC;EAED,MAAMC,WAAW,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,SAAS,KAAK;IAC/C,MAAMP,GAAG,GAAG,MAAML,OAAO,CAAE,wDAAuDW,QAAS,QAAOC,SAAU,UAASX,QAAS,EAAC,CAAC;IAChI,OAAO;MAAEY,IAAI,EAAER,GAAG,CAACQ,IAAI,CAACC,IAAI;MAAEC,OAAO,EAAEV,GAAG,CAACC,IAAI,CAACE,GAAG,CAACQ,kBAAkB;IAAC,CAAC;EAC5E,CAAC;EAED,MAAMC,iBAAiB,GAAG,MAAOJ,IAAI,IAAK;IACtC,MAAMR,GAAG,GAAG,MAAML,OAAO,CAAE,qDAAoDa,IAAK,UAASZ,QAAS,EAAC,CAAC;IACxG,OAAO;MAAE,KAAK,EAAEI,GAAG,CAACa,KAAK,CAACC,GAAG;MAAE,KAAK,EAAEd,GAAG,CAACa,KAAK,CAACE;IAAG,CAAC;EACxD,CAAC;EAED,MAAMJ,kBAAkB,GAAIK,IAAI,IAAK;IACjC,OAAO;MACHN,OAAO,EAAEM,IAAI,CAACN,OAAO,CAAC,CAAC,CAAC,CAACO,IAAI;MAC7BC,WAAW,EAAEC,IAAI,CAACC,KAAK,CAACJ,IAAI,CAACC,IAAI,CAACI,IAAI,GAAG,MAAM,CAAC;MAChDC,aAAa,EAAEN,IAAI,CAACO,GAAG;MACvBC,QAAQ,EAAER,IAAI,CAACC,IAAI,CAACO,QAAQ;MAC5BC,IAAI,EAAET,IAAI,CAACS,IAAI,CAACC,KAAK;MACrBC,IAAI,EAAEX,IAAI,CAACN,OAAO,CAAC,CAAC,CAAC,CAACiB;IAC1B,CAAC;EACL,CAAC;EAED,MAAMvB,gBAAgB,GAAIY,IAAI,IAAK;IAC/B,OAAO;MACHY,QAAQ,EAAEZ,IAAI,CAACY,QAAQ;MACvBC,KAAK,EAAEb,IAAI,CAACc,qBAAqB,CAACC;IACtC,CAAC;EACL,CAAC;EAED,OAAO;IACHjC,kBAAkB;IAClBO,WAAW;IACXO;EACJ,CAAC;AACL,CAAC;AAAAlB,EAAA,CA3CKD,iBAAiB;EAAA,QACDD,OAAO;AAAA;AA4C7B,eAAeC,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}